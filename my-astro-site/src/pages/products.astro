---
import Layout from "../layouts/Layout.astro";
import ProductCard from "../components/ProductCard";
import Visible from "../components/Visible";
import type { IProduct } from "../types";

const response = await fetch("https://fakestoreapi.com/products");
const products: Array<IProduct> = await response.json();

---
<Layout title="Astro - Products">
  <h1 class="text-2xl font-bold">Products</h1>
  <div>
    {products.map(product => (
      <ProductCard key={product.id.toString()} client:load product={product} />
    ))}
  </div>
  <Visible client:visible />
</Layout>